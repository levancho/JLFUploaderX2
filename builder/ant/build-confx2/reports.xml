<project name="reports" basedir=".">

    <dirname property="reports.basedir" file="${ant.file.reports}"/>

    <property name="settings.dir" value="${reports.basedir}"/>
    <property name="doc.src" value="xdocs"/>

    <taskdef resource="checkstyletask.properties" classpath="${settings.dir}/lib/checkstyle-all-5.1.jar"/>


    <taskdef name="pmd" classname="net.sourceforge.pmd.ant.PMDTask">
        <classpath>
            <fileset dir="${settings.dir}/lib/pmd-4.2.5">
                <include name="**/*.jar"/>
            </fileset>
        </classpath>
    </taskdef>


    <target name="checkstyle" description="Generates a report of code convention violations.">

        <checkstyle config="sun_checks.xml" failureProperty="checkstyle.failure" failOnViolation="false">
            <formatter type="xml" tofile="checkstyle_report.xml"/>
            <fileset dir="src" includes="**/*.java"/>
        </checkstyle>

    </target>
    <target name="pmd">
        <pmd rulesetfiles="basic,imports,unusedcode,controversial">
            <formatter type="xml" toFile="${basedir}/pmd_report.xml"/>
            <fileset dir="src">
                <include name="**/*.java"/>
            </fileset>
        </pmd>
    </target>


</project>